<?xml version="1.0" encoding="utf-8" ?>
<Project>
  <PropertyGroup>
    <BaseOutputPath Condition="'$(BaseOutputPath)'==''">bin/</BaseOutputPath>
  </PropertyGroup>

  <ItemGroup>
    <!-- todo: fix the excludes -->
    <Json Include="**/*.json" Exclude="$(BaseOutputPath)**;obj\**" />
  </ItemGroup>

  <PropertyGroup>
    <TaskFolder Condition=" '$(MSBuildRuntimeType)' == 'Core' ">netstandard1.5</TaskFolder>
    <TaskFolder Condition=" '$(MSBuildRuntimeType)' != 'Core' ">net46</TaskFolder>
    <TaskAssembly>$(MSBuildThisFileDirectory)$(TaskFolder)\Adfc.Msbuild.dll</TaskAssembly>
  </PropertyGroup>

  <UsingTask 
    TaskName="Adfc.Msbuild.AdfcBuild"
    AssemblyFile="$(TaskAssembly)"/>

  <Target Name="build">
    <AdfcBuild
      OutputPath="$(OutputPath)"
      JsonFiles="@(Json)"
      />
  </Target>
</Project>
